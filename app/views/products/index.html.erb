<% content_for :title, "Supra Beach Volley Store" %>

<%= render "shared/navbar" %>

<section class="relative overflow-hidden">
  <div class="absolute inset-0 -z-10 bg-gradient-to-b from-surf/20 via-transparent to-sand/10"></div>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 md:py-16 space-y-12">
    <div class="grid gap-10 lg:grid-cols-[minmax(0,1.05fr)_minmax(0,0.95fr)] items-center">
      <div class="space-y-7" id="hero">
        <p class="inline-flex items-center gap-2 rounded-full bg-brand/15 px-4 py-1 text-xs font-semibold uppercase tracking-[0.35em] text-brand" data-i18n data-i18n-en="Beach Volley Nation" data-i18n-th="ชุมชนวอลเลย์ชายหาด">Beach Volley Nation</p>
        <h1 class="text-3xl md:text-5xl font-semibold leading-tight text-ink" data-i18n data-i18n-en="Gear up for the beach volleyball arena" data-i18n-th="เตรียมตัวให้พร้อมสู่สนามวอลเลย์บนชายหาด">Gear up for the beach volleyball arena</h1>
        <p class="text-slate-600 text-base md:text-lg max-w-2xl" data-i18n data-i18n-en="Shop match-ready apparel, pro-grade balls, and hydration tech curated for sun, sand, and clutch plays." data-i18n-th="ช้อปชุดแข่งพร้อมสนาม ลูกวอลเลย์ระดับโปร และแกดเจ็ตเติมพลัง คัดมาเพื่อแดด ทะเล และจังหวะสำคัญ">Shop match-ready apparel, pro-grade balls, and hydration tech curated for sun, sand, and clutch plays.</p>
        <div class="flex flex-wrap items-center gap-4">
          <button type="button" class="inline-flex items-center gap-2 rounded-full bg-brand px-6 py-3 text-sm font-semibold text-white shadow-glow hover:bg-brand-dark transition" data-modal-trigger="login-modal">
            <span data-i18n data-i18n-en="Join the sand crew" data-i18n-th="เข้าร่วมแก๊งชายหาด">Join the sand crew</span>
            <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24" aria-hidden="true">
              <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
            </svg>
          </button>
          <a href="#collections" class="inline-flex items-center gap-2 rounded-full border border-brand/30 px-6 py-3 text-sm font-semibold text-brand hover:bg-brand hover:text-white transition">
            <span data-i18n data-i18n-en="Shop gear" data-i18n-th="เลือกซื้ออุปกรณ์">Shop gear</span>
            <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24" aria-hidden="true">
              <path stroke-linecap="round" stroke-linejoin="round" d="m9 5 7 7-7 7" />
            </svg>
          </a>
        </div>
        <div class="grid grid-cols-2 sm:grid-cols-4 gap-4 pt-4 text-sm">
          <div class="rounded-2xl border border-brand/30 bg-white p-4 shadow-lg shadow-brand/10">
            <p class="text-xs uppercase tracking-[0.35em] text-brand" data-i18n data-i18n-en="Beach clubs" data-i18n-th="คลับชายหาด">Beach clubs</p>
            <p class="mt-2 text-2xl font-semibold text-ink">120+</p>
            <p class="text-xs text-slate-500" data-i18n data-i18n-en="Across Thailand" data-i18n-th="ทั่วไทย">Across Thailand</p>
          </div>
          <div class="rounded-2xl border border-white/0 bg-white p-4 shadow-lg shadow-brand/5">
            <p class="text-xs uppercase tracking-[0.35em] text-brand" data-i18n data-i18n-en="Heat ready" data-i18n-th="พร้อมลุยแดด">Heat ready</p>
            <p class="mt-2 text-2xl font-semibold text-ink" data-i18n data-i18n-en="SPF 50+" data-i18n-th="SPF 50+">SPF 50+</p>
            <p class="text-xs text-slate-500" data-i18n data-i18n-en="Fabric tech" data-i18n-th="เทคโนโลยีผ้า">Fabric tech</p>
          </div>
          <div class="rounded-2xl border border-white/0 bg-white p-4 shadow-lg shadow-brand/5">
            <p class="text-xs uppercase tracking-[0.35em] text-brand" data-i18n data-i18n-en="Coach picks" data-i18n-th="โค้ชแนะนำ">Coach picks</p>
            <p class="mt-2 text-2xl font-semibold text-ink">Top 16</p>
            <p class="text-xs text-slate-500" data-i18n data-i18n-en="Weekly rotation" data-i18n-th="อัปเดตรายสัปดาห์">Weekly rotation</p>
          </div>
          <div class="rounded-2xl border border-white/0 bg-white p-4 shadow-lg shadow-brand/5">
            <p class="text-xs uppercase tracking-[0.35em] text-brand" data-i18n data-i18n-en="Hydration" data-i18n-th="เติมพลัง">Hydration</p>
            <p class="mt-2 text-2xl font-semibold text-ink">Free refills</p>
            <p class="text-xs text-slate-500" data-i18n data-i18n-en="On-site huts" data-i18n-th="ซุ้มบริการหน้างาน">On-site huts</p>
          </div>
        </div>
        <div class="grid gap-4 lg:grid-cols-2" data-spike-game>
          <div class="rounded-3xl bg-white/90 border border-brand/30 p-6 shadow-lg shadow-brand/20">
            <div class="flex items-center justify-between">
              <h2 class="text-lg font-semibold text-ink" data-i18n data-i18n-en="Spike Rhythm Challenge" data-i18n-th="เกมจับจังหวะตบ">Spike Rhythm Challenge</h2>
              <span class="inline-flex items-center gap-1 rounded-full bg-brand/15 px-3 py-1 text-xs font-semibold text-brand" data-i18n data-i18n-en="Tap on beat" data-i18n-th="กดให้ตรงจังหวะ">Tap on beat</span>
            </div>
            <div class="mt-5 flex flex-col sm:flex-row sm:items-center gap-6">
              <div class="relative flex h-28 w-28 items-center justify-center">
                <div class="absolute inset-0 rounded-full border-4 border-surf/20"></div>
                <div class="absolute inset-3 rounded-full border-2 border-brand/20"></div>
                <div data-spike-beat class="relative flex h-16 w-16 items-center justify-center rounded-full bg-brand/20 text-brand font-semibold uppercase tracking-[0.3em] transition-opacity duration-200 opacity-20">
                  GO
                </div>
              </div>
              <div class="flex-1 space-y-3">
                <div class="flex items-center gap-3 text-sm">
                  <p class="font-semibold text-ink" data-i18n data-i18n-en="Score" data-i18n-th="คะแนน">Score</p>
                  <span data-spike-score class="text-2xl font-semibold text-brand">0</span>
                </div>
                <div class="flex items-center gap-3 text-sm">
                  <p class="font-semibold text-ink" data-i18n data-i18n-en="Combo" data-i18n-th="คอมโบ">Combo</p>
                  <span data-spike-combo class="text-xl font-semibold text-surf">x0</span>
                </div>
                <p data-spike-message class="text-sm text-slate-500 leading-relaxed"></p>
                <button type="button" data-spike-button class="inline-flex items-center gap-2 rounded-full bg-brand px-4 py-2 text-sm font-semibold text-white shadow-md transition transform active:scale-95">
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24" aria-hidden="true">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 4.5 19.5 12 4.5 19.5 8 12z" />
                  </svg>
                  <span data-i18n data-i18n-en="Spike!" data-i18n-th="ตบเลย!">Spike!</span>
                </button>
              </div>
            </div>
            <p class="mt-4 text-xs text-slate-400" data-i18n data-i18n-en="Hit streaks unlock instant sand dollar coupons at checkout." data-i18n-th="กดติดคอมโบเพื่อปลดล็อกคูปอง Sand Dollar ใช้ลดตอนชำระเงิน">Hit streaks unlock instant sand dollar coupons at checkout.</p>
          </div>
          <div class="rounded-3xl border border-surf/30 bg-surf/10 p-6 shadow-lg shadow-surf/20">
            <h3 class="text-base font-semibold text-ink" data-i18n data-i18n-en="Redeem your rhythm" data-i18n-th="แลกจังหวะเป็นดีล">Redeem your rhythm</h3>
            <p class="mt-2 text-sm text-ink/70" data-i18n data-i18n-en="Keep the beat to grab limited Sunset Serve bundles, then jump straight to the catalog to secure your kit." data-i18n-th="รักษาจังหวะเพื่อคว้าชุด Sunset Serve แบบจำนวนจำกัด แล้วช้อปต่อในแคตตาล็อกได้เลย">Keep the beat to grab limited Sunset Serve bundles, then jump straight to the catalog to secure your kit.</p>
            <a href="#flash-sale" class="mt-4 inline-flex items-center gap-2 rounded-full bg-white px-4 py-2 text-sm font-semibold text-brand border border-brand/20 hover:bg-brand hover:text-white transition">
              <span data-i18n data-i18n-en="See Sunset deals" data-i18n-th="ดูดีลยามเย็น">See Sunset deals</span>
              <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24" aria-hidden="true">
                <path stroke-linecap="round" stroke-linejoin="round" d="m9 5 7 7-7 7" />
              </svg>
            </a>
          </div>
        </div>
      </div>
      <% if @featured_product.present? %>
        <div class="relative">
          <div class="absolute inset-0 -z-10 bg-gradient-to-br from-surf/40 via-brand/20 to-sand/30 blur-3xl rounded-full"></div>
          <article class="group relative overflow-hidden rounded-[32px] border border-white/70 bg-white/95 shadow-xl shadow-surf/30">
            <div class="absolute inset-x-0 top-0 h-1 bg-gradient-to-r from-surf via-brand to-sand"></div>
            <div class="flex flex-col">
              <div class="relative aspect-[4/5] overflow-hidden bg-surf/10">
                <img src="<%= @featured_product["image"] %>" alt="<%= @featured_product["title"] %>" class="h-full w-full object-contain transition-transform duration-700 ease-out group-hover:scale-105 group-hover:rotate-1">
              </div>
              <div class="p-6 space-y-4">
                <p class="text-xs uppercase tracking-[0.35em] text-brand" data-i18n data-i18n-en="Captain's pick" data-i18n-th="ตัวเลือกกัปตันทีม">Captain's pick</p>
                <h2 class="text-xl font-semibold text-ink line-clamp-2"><%= @featured_product["title"] %></h2>
                <p class="text-sm text-slate-500 line-clamp-2"><%= truncate(@featured_product["description"], length: 140) %></p>
                <div class="flex items-center justify-between">
                  <p class="text-2xl font-semibold text-ink"><%= number_to_currency(@featured_product["price"], precision: 2) %></p>
                  <a href="<%= product_path(@featured_product["id"]) %>" class="inline-flex items-center gap-2 rounded-full border border-brand px-4 py-2 text-sm font-semibold text-brand hover:bg-brand hover:text-white transition">
                    <span data-i18n data-i18n-en="View" data-i18n-th="ดูรายละเอียด">View</span>
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24" aria-hidden="true">
                      <path stroke-linecap="round" stroke-linejoin="round" d="m9 5 7 7-7 7" />
                    </svg>
                  </a>
                </div>
              </div>
            </div>
          </article>
        </div>
      <% end %>
    </div>

    <% if @trending_categories.present? %>
      <div class="grid gap-4 sm:grid-cols-2 lg:grid-cols-4" id="collections">
        <% @trending_categories.each do |category| %>
          <div class="rounded-3xl border border-white/0 bg-white p-6 shadow-lg shadow-surf/10">
            <p class="text-xs uppercase tracking-[0.35em] text-brand"><%= category[:name].to_s.titleize %></p>
            <p class="mt-3 text-2xl font-semibold text-ink"><%= category[:count] %> <span class="text-sm font-medium text-slate-400" data-i18n data-i18n-en="kits" data-i18n-th="ชุด">kits</span></p>
            <p class="mt-2 text-sm text-slate-500" data-i18n data-i18n-en="Engineered for explosive jumps and faster recoveries." data-i18n-th="ออกแบบเพื่อการกระโดดทรงพลังและฟื้นตัวรวดเร็ว">Engineered for explosive jumps and faster recoveries.</p>
          </div>
        <% end %>
      </div>
    <% end %>

    <% if @flash_sale_products.present? && @flash_sale_deadline.present? %>
      <section id="flash-sale" class="rounded-[32px] bg-gradient-to-br from-night via-tide/80 to-brand/80 text-white p-6 md:p-10 shadow-xl shadow-night/40" data-countdown-end="<%= @flash_sale_deadline %>">
        <div class="flex flex-wrap items-center justify-between gap-6">
          <div class="space-y-3 max-w-xl">
            <p class="inline-flex items-center gap-2 rounded-full bg-white/10 px-4 py-1 text-xs font-semibold uppercase tracking-[0.35em] text-sand" data-i18n data-i18n-en="Sunset flash serve" data-i18n-th="แฟลชเซิร์ฟยามเย็น">Sunset flash serve</p>
            <h2 class="text-3xl md:text-4xl font-semibold" data-i18n data-i18n-en="Limited drops for twilight rallies" data-i18n-th="ดีลจำกัดเพื่อเกมยามเย็น">Limited drops for twilight rallies</h2>
            <p class="text-sm md:text-base text-white/80" data-i18n data-i18n-en="Claim team bundles, UV shields, and pro balls before the horn sounds." data-i18n-th="คว้าชุดทีม กันแดด และลูกโปรก่อนเสียงนกหวีดดัง">Claim team bundles, UV shields, and pro balls before the horn sounds.</p>
          </div>
          <div class="text-center">
            <span class="block text-xs uppercase tracking-[0.35em] text-white/70" data-i18n data-i18n-en="Ends in" data-i18n-th="หมดเวลาใน">Ends in</span>
            <span class="text-3xl md:text-4xl font-semibold text-sand" data-countdown-display>00:45:00</span>
          </div>
        </div>
        <div class="mt-8 grid gap-6 md:grid-cols-3">
          <% @flash_sale_products.each do |product| %>
            <% discount_rate = 0.18 %>
            <% original_price = product["price"].to_f %>
            <% discounted_price = original_price * (1 - discount_rate) %>
            <article class="group rounded-3xl bg-white/10 p-5 shadow-lg shadow-black/20 transition hover:bg-white/20">
              <div class="aspect-square rounded-2xl bg-white/10 flex items-center justify-center overflow-hidden">
                <img src="<%= product["image"] %>" alt="<%= product["title"] %>" class="h-full w-full object-contain transition-transform duration-500 group-hover:scale-105">
              </div>
              <div class="mt-5 space-y-3">
                <h3 class="text-lg font-semibold text-white line-clamp-2"><%= product["title"] %></h3>
                <p class="text-sm text-white/70 line-clamp-2"><%= truncate(product["description"], length: 120) %></p>
                <div class="flex items-baseline gap-3">
                  <p class="text-2xl font-semibold text-sand"><%= number_to_currency(discounted_price, precision: 2) %></p>
                  <p class="text-sm text-white/50 line-through"><%= number_to_currency(original_price, precision: 2) %></p>
                  <span class="inline-flex items-center gap-1 rounded-full bg-brand px-3 py-1 text-xs font-semibold text-night shadow-md">
                    -<%= (discount_rate * 100).to_i %>%
                  </span>
                </div>
                <a href="<%= product_path(product["id"]) %>" class="inline-flex items-center gap-2 rounded-full bg-sand px-4 py-2 text-sm font-semibold text-night transition hover:bg-white">
                  <span data-i18n data-i18n-en="Secure deal" data-i18n-th="คว้าดีล">Secure deal</span>
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24" aria-hidden="true">
                    <path stroke-linecap="round" stroke-linejoin="round" d="m9 5 7 7-7 7" />
                  </svg>
                </a>
              </div>
            </article>
          <% end %>
        </div>
      </section>
    <% end %>

    <% if @error.present? %>
      <div class="bg-white border border-red-200 text-red-600 px-6 py-6 rounded-3xl text-center shadow-sm">
        <p class="font-medium"><%= @error %></p>
        <p class="text-sm text-red-400 mt-2" data-i18n data-i18n-en="Please refresh or try again later." data-i18n-th="โปรดรีเฟรชหรือกลับมาใหม่อีกครั้ง">Please refresh or try again later.</p>
      </div>
    <% elsif @products.blank? %>
      <div class="bg-white border border-slate-200 px-6 py-10 rounded-3xl text-center shadow-sm">
        <p class="text-lg font-medium text-ink" data-i18n data-i18n-en="No gear available right now." data-i18n-th="ตอนนี้ยังไม่มีอุปกรณ์พร้อมจำหน่าย">No gear available right now.</p>
        <p class="text-sm text-slate-500 mt-2" data-i18n data-i18n-en="Check back soon as the next tide delivers more stock." data-i18n-th="กลับมาใหม่เร็วๆ นี้ คลื่นรอบหน้าจะพาสินค้ามาเพิ่ม">Check back soon as the next tide delivers more stock.</p>
      </div>
    <% else %>
      <div class="space-y-10">
        <div class="flex flex-wrap items-center justify-between gap-4">
          <div>
            <h2 class="text-2xl font-semibold text-ink" data-i18n data-i18n-en="Arena highlights" data-i18n-th="ไฮไลต์ประจำสนาม">Arena highlights</h2>
            <p class="text-sm text-slate-500" data-i18n data-i18n-en="Hover for wind-swept animations and quick previews." data-i18n-th="เลื่อนเมาส์เพื่อชมแอนิเมชันรับลมทะเลและพรีวิวทันใจ">Hover for wind-swept animations and quick previews.</p>
          </div>
          <p class="text-sm text-slate-500" data-i18n data-i18n-en="Showing" data-i18n-th="แสดง">Showing</p>
          <p class="text-sm font-semibold text-brand"><%= @products.size %> <span class="font-normal text-slate-500" data-i18n data-i18n-en="items" data-i18n-th="รายการ">items</span></p>
        </div>
        <div class="grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-6" data-controller="scroll" data-action="mouseenter->scroll#pause mouseleave->scroll#resume">
          <% @products.each_with_index do |product, index| %>
            <article class="group relative bg-white/95 rounded-[30px] overflow-hidden border border-transparent shadow-sm transition-all duration-500 ease-out hover:-translate-y-2 hover:shadow-card">
              <div class="absolute inset-x-4 top-4 flex items-center justify-between text-[10px] uppercase tracking-[0.35em] text-slate-400">
                <span><%= product["category"].to_s.titleize %></span>
                <span>#<%= format("%02d", index + 1) %></span>
              </div>
              <div class="aspect-[4/5] bg-surf/10 flex items-center justify-center p-6">
                <img src="<%= product["image"] %>" alt="<%= product["title"] %>" class="h-full object-contain transition-transform duration-500 ease-out group-hover:scale-105 group-hover:rotate-1">
              </div>
              <div class="flex flex-col gap-3 p-6">
                <h3 class="text-lg font-semibold text-ink line-clamp-2 min-h-[3.5rem]"><%= product["title"] %></h3>
                <p class="text-sm text-slate-500 line-clamp-2 min-h-[2.75rem]"><%= truncate(product["description"], length: 120) %></p>
                <div class="flex items-center justify-between pt-2">
                  <p class="text-xl font-semibold text-ink"><%= number_to_currency(product["price"], precision: 2) %></p>
                  <a href="<%= product_path(product["id"]) %>" class="inline-flex items-center gap-2 rounded-full bg-white px-4 py-2 text-sm font-semibold text-brand border border-brand/40 hover:bg-brand hover:text-white transition">
                    <span data-i18n data-i18n-en="Details" data-i18n-th="รายละเอียด">Details</span>
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24" aria-hidden="true">
                      <path stroke-linecap="round" stroke-linejoin="round" d="m9 5 7 7-7 7" />
                    </svg>
                  </a>
                </div>
              </div>
            </article>
          <% end %>
        </div>
      </div>
    <% end %>

    <% if @recommended_products.present? %>
      <div class="space-y-6" id="recommendations">
        <div class="flex flex-wrap items-center justify-between gap-4">
          <div>
            <h2 class="text-2xl font-semibold text-ink" data-i18n data-i18n-en="Recommended for your lineup" data-i18n-th="แนะนำสำหรับไลน์อัปของคุณ">Recommended for your lineup</h2>
            <p class="text-sm text-slate-500" data-i18n data-i18n-en="Picked based on what Thai beach crews are loving." data-i18n-th="คัดตามกระแสที่ทีมชายหาดไทยกำลังปลื้ม">Picked based on what Thai beach crews are loving.</p>
          </div>
          <a href="#ai-concierge" class="text-sm font-semibold text-brand hover:text-brand-dark" data-i18n data-i18n-en="Ask AI for matchday combos" data-i18n-th="ถาม AI เพื่อจัดชุดวันแข่ง">Ask AI for matchday combos</a>
        </div>
        <div class="flex gap-5 overflow-x-auto pb-4 snap-x" role="list">
          <% @recommended_products.each do |product| %>
            <article role="listitem" class="min-w-[260px] snap-center rounded-3xl border border-white/0 bg-white p-5 shadow-lg shadow-brand/10 transition hover:-translate-y-1 hover:shadow-card">
              <div class="aspect-square rounded-2xl bg-surf/10 flex items-center justify-center mb-4 overflow-hidden">
                <img src="<%= product["image"] %>" alt="<%= product["title"] %>" class="h-full object-contain transition-transform duration-500 ease-out hover:scale-105">
              </div>
              <h3 class="text-base font-semibold text-ink line-clamp-2 h-12"><%= product["title"] %></h3>
              <p class="mt-2 text-sm text-slate-500 line-clamp-2"><%= truncate(product["description"], length: 90) %></p>
              <div class="mt-3 flex items-center justify-between">
                <p class="text-lg font-semibold text-ink"><%= number_to_currency(product["price"], precision: 2) %></p>
                <a href="<%= product_path(product["id"]) %>" class="inline-flex items-center gap-2 rounded-full bg-brand px-4 py-2 text-sm font-semibold text-white shadow-glow hover:bg-brand-dark transition">
                  <span data-i18n data-i18n-en="Shop" data-i18n-th="ช้อป">Shop</span>
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24" aria-hidden="true">
                    <path stroke-linecap="round" stroke-linejoin="round" d="m9 5 7 7-7 7" />
                  </svg>
                </a>
              </div>
            </article>
          <% end %>
        </div>
      </div>
    <% end %>

    <%= render "shared/loyalty_banner" %>
    <%= render "shared/footer_links" %>
  </div>
</section>
